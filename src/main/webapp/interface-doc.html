<!DOCTYPE html>
<html>

<head>
	<style type="text/css">
		tr.auth-user {
			background-color: #d9d919
		}
		
		tr.user {
			background-color: #12ff7c
		}
		
		tr.borrowhistory {
			background-color: #f498ee
		}
		
		tr.goods {
			background-color: #e47833
		}
		
		tr.cartitem {
			background-color: #ff7f00
		}
		
		tr.evaluation {
			background-color: #cdcdcd
		}
		
		tr.bookcrud {
			background-color: #bc8f8f
		}
		
		tr.order {
			background-color: #93db70
		}
		
		tr.mainpage {
			background-color: #855e42
		}
		
		td.pre {
			width: 100%
		}
		
		#indexList {
			filter: alpha(Opacity=80);
			-moz-opacity: 0.5;
			opacity: 0.5;
			z-index: 100;
			background-color: #ffffff;
			position: fixed;
			left: 90%;
			font-size: 70%
			
		}
	</style>
	<meta charset="UTF-8">
	<title>reusebook interface doc</title>
</head>

<body>
	
	<script>
		window.onload = function(){
			var indexListDiv = document.getElementById("indexList");
			var interfaceTBody = document.getElementById("interfaces");
			var indexListStruct = {};
			var trs = interfaceTBody.getElementsByTagName("tr");
			for(var i = 0; i < trs.length; i++){
				var aTr = trs[i];
				var className = aTr.getAttribute("class");
				var idName = aTr.getAttribute("id");
				if(indexListStruct[className] == null){
					indexListStruct[className] = [];
				}
				indexListStruct[className].push(idName);
			}

			for(var e in indexListStruct){
				var oneh1 = document.createElement("p");
				oneh1.innerText = e;
				indexListDiv.appendChild(oneh1);
				var strings = indexListStruct[e];
				for(var e2 in strings){
					var onea = document.createElement("a");

					var methodName = strings[e2];
					var methodNameCut = methodName.substr(e.length + 1);

					onea.setAttribute("href","#" + methodName);
					onea.innerText = methodNameCut;
					indexListDiv.appendChild(onea);
					indexListDiv.appendChild(document.createElement("br"));
				}
			}

		}
	</script>
<!--	
	<div>
		<p>成功</p>
		<p>SUCCESS_200 = 200;</p>
		<p>请求有错，比如参数错误等</p>
		<p>REQ_ERROR_400 = 400;</p>
		<p>未验证</p>
		<p>NOT_VALIDATE_401 = 401;</p>
		<p>服务器拒绝响应</p>
		<p>public static final int ACCESS_DECLINE_403 = 403;</p>
		<p>没有找到对应的资源</p>
		<p>NO_RESOURCE_404 = 404;</p>
		<p>服务器错误</p>
		<p>SERVICE_ERROR_500= 50</p>
	</div>
	-->
	<div id="indexList">
	</div>

	<table>
		<thead>
			<tr>
				<th>name</th>
				<th>url</th>
				<th>method</th>
				<th>params</th>
				<th>tips</th>
				<th>success return</th>
			</tr>
		</thead>

		<tbody id="interfaces">
			<tr class="auth-user" id="auth-user-login">
				<td>一般用户登录</td>
				<td>auth/user/login.do</td>
				<td>post</td>
				<td>
					<p>username 用户名</p>
					<p>password 密码</p>
					<pre>
{
	"username":"sad",
	"password":"987"
}
					</pre>
				</td>
				<td>返回的password为空</td>
				<td>
					<pre>
登录成功
{
    "status": 200,
    "msg": "登录成功",
    "data": {
        "id": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
        "username": "sad",
        "password": ""
    },
    "other": null
}
该用户已登录
{
    "status": 200,
    "msg": "已登录",
    "data": {
        "id": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
        "username": "sad",
        "password": ""
    },
    "other": null
}
用户名输入错误
{
    "status": 400,
    "msg": "用户不存在",
    "data": null,
    "other": null
}
密码输入错误
{
    "status": 400,
    "msg": "密码错误",
    "data": null,
    "other": null
}
						</pre>
				</td>
			</tr>
			<tr class="auth-user" id="auth-user-register">
				<td>一般用户注册</td>
				<td>
					auth/user/register.do
				</td>
				<td>post</td>
				<td>
					<p>username 用户名</p>
					<p>password 密码</p>
					<pre>
{
	"username":"sad",
	"password":"987"
}
					</pre>
				</td>
				<td>返回的password为空</td>
				<td>
					<pre>
注册成功
{
    "status": 200,
    "msg": "注册成功",
    "data": {
        "id": "3b07f71d-50c7-4861-a25d-b598093bf861",
        "username": "happy",
        "password": ""
    },
    "other": null
}
						</pre>
				</td>
			</tr>
			<tr class="auth-user" id="auth-user-logout">
				<td>一般用户注销</td>
				<td>
					auth/user/logout.do
				</td>
				<td>get</td>
				<td>
				</td>
				<td></td>
				<td>
					<pre>
注销成功
{
    "status": 200,
    "msg": "注销成功",
    "data": null,
    "other": null
}
						</pre>
				</td>
			</tr>
			<tr class="goods" id="goods-search">
				<td>通过关键字分页搜商品</td>
				<td>
					goods/search.do
				</td>
				<td>post</td>
				<td>
					<p>keyword 搜索关键字</p>
					<p>pageNo 页数</p>
					<p>limit 每页条数</p>
					<pre>
{
	"keyword" : "C",
	"pageNo" : 1,
	"limit" : 1
}
					</pre>
				</td>
				<td></td>
				<td>
					<pre>		
{
  "status": 200,
  "msg": "搜索成功",
  "data": [
    {
      "id": "1",
      "realGoodsId": "11",
      "sellerId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
      "linkTable": "tab_book",
      "name": "C",
      "price": 321.2,
      "count": 3
    },
    {
      "id": "3",
      "realGoodsId": "13",
      "sellerId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
      "linkTable": "tab_book",
      "name": "C++",
      "price": 439.2,
      "count": 3
    }
  ],
  "other": null
}
					</pre>
				</td>
			</tr>

			<tr class="goods" id="goods-get-real-goods">
				<td>通过商品id获取实际商品信息</td>
				<td>
					goods/getRealGoods.do
				</td>
				<td>post</td>
				<td>
					<p>id 商品id</p>
					<pre>
{
  "id":"2"
}
					</pre>
				</td>
				<td></td>
				<td>
					<pre>		
{
  "status": 200,
  "msg": "获取成功",
  "data": {
    "id": "12",
    "name": "Java",
    "author": "ytutre",
    "isbn": "6744533"
	还包含其他商品信息
  },
  "other": null
}
					</pre>
				</td>
			</tr>








			<tr class="user" id="user-change-password">
				<td>修改密码</td>
				<td>
					user/changePassword.do
				</td>
				<td>post</td>
				<td>
					<p>oldPassword 旧密码</p>
					<p>newPassword 新密码</p>
					<pre>
{
  "oldPassword":"000",
  "newPassword":"000sdad"
}
					</pre>
				</td>
				<td>需要登录，不会返回密码</td>
				<td>
					<pre>	
{
  "status": 200,
  "msg": "修改成功",
  "data": {
    "id": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
    "username": "sad",
    "password": "",
    "createTime": 1487088000000,
    "cartItems": null
  },
  "other": null
}
					</pre>
				</td>
			</tr>

			<tr class="user" id="user-add-address">
				<td>添加收货地址</td>
				<td>
					user/addAddress.do
				</td>
				<td>get</td>
				<td>
					<p>address 收货地址</p>
					<pre>
{
  "address":"江苏省南京市栖霞区文苑路南京邮电大学"
}
					</pre>
				</td>
				<td>需要登录</td>
				<td>
					<pre>	
{
  "status": 200,
  "msg": "添加收货地址成功",
  "data": null,
  "other": null
}
						</pre>
				</td>
			</tr>

			<tr class="user" id="user-delete-address">
				<td>删除收货地址</td>
				<td>
					user/deleteAddress.do
				</td>
				<td>post</td>
				<td>
					<p>id 收货地址的id</p>
					<pre>
{
	"id":"6abd4f8d-3a79-4fb7-b573-add4f449d32c"
}
					</pre>
				</td>
				<td>需要登录</td>
				<td>
					<pre>	
{
  "status": 200,
  "msg": "删除收货地址成功",
  "data": null,
  "other": null
}
					</pre>
				</td>
			</tr>

			<tr class="cartitem" id="cartitem-select-all">
				<td>返回一个用户的所有购物车项</td>
				<td>
					cartitem/selectAll.do
				</td>
				<td>get</td>
				<td>
				</td>
				<td>需要登录</td>
				<td>
					<pre>
{
  "status": 200,
  "msg": "返回购物车项成功",
  "data": [
    {
      "id": "69ba6683-911c-4ae8-8a25-0ba7129123fc",
      "userId": null,
      "goodsId": "3",
      "goodsCount": 3,
      "goods": {
        "id": "3",
        "realGoodsId": "13",
        "sellerId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
        "linkTable": "tab_book",
        "name": "C++",
        "price": 439.2,
        "count": 3
      }
    },
    {
      "id": "dc31af78-035d-410b-9d13-82e3fa7e393c",
      "userId": null,
      "goodsId": "2",
      "goodsCount": 10,
      "goods": {
        "id": "2",
        "realGoodsId": "12",
        "sellerId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
        "linkTable": "tab_book",
        "name": "Java",
        "price": 432.4,
        "count": 9
      }
    }
  ],
  "other": null
}
						</pre>
				</td>
			</tr>

			<tr class="cartitem" id="cartitem-add">
				<td>某商品添加至购物车</td>
				<td>
					cartitem/add.do
				</td>
				<td>post</td>
				<td>
					<p>goodsId 添加的商品id</p>
					<p>goodsCount 添加的商品数量</p>
					<pre>
{
	"goodsId":"3",
	"goodsCount":3
}
					</pre>
				</td>
				<td>需要登录</td>
				<td>
					<pre>
{
  "status": 200,
  "msg": "添加至购物车成功",
  "data": {
    "id": "bf1210b5-4bc1-4c32-853a-0257d0150bfd",
    "userId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
    "goodsId": "3",
    "goodsCount": 3,
    "goods": null
  },
  "other": null
}
						</pre>
				</td>
			</tr>

			<tr class="cartitem" id="cartitem-update-goods-count">
				<td>借书</td>
				<td>
					cartitem/updateGoodsCount.do
				</td>
				<td>post</td>
				<td>
					<p>id 购物车项的id</p>
					<p>goodsCount 要修改为的数量</p>
					<pre>
{
	"id":"bf1210b5-4bc1-4c32-853a-0257d0150bfd",
	"goodsCount":12
}
					</pre>
				</td>
				<td>需要登录</td>
				<td>
					<pre>
{
  "status": 200,
  "msg": "修改购物车商品数量成功",
  "data": "",
  "other": null
}
						</pre>
				</td>
			</tr>

			<tr class="cartitem" id="cartitem-delete-by-id">
				<td>根据id删除商品项</td>
				<td>
					cartitem/deleteById.do
				</td>
				<td>post</td>
				<td>
					<p>id 商品项的id</p>
					<pre>
{
	"id":"bf1210b5-4bc1-4c32-853a-0257d0150bfd"
}
					</pre>
				</td>
				<td>需要登录</td>
				<td>
					<pre>
{
  "status": 200,
  "msg": "删除购物车项成功",
  "data": "",
  "other": null
}
						</pre>
				</td>
			</tr>

			<tr class="evaluation" id="evaluation-add">
				<td>添加一条评论</td>
				<td>
					evaluation/add.do
				</td>
				<td>post</td>
				<td>
					<p>goodsId 商品的id</p>
					<p>content 评论内容</p>
					<pre>
{
	"goodsId":"",
	"content":"111111是分隔符"
}
					</pre>
				</td>
				<td>需要登陆，一个用户不能对同一个商品多次评论</td>
				<td>
					<pre>
{
  "status": 200,
  "msg": "添加评论成功",
  "data": {
    "id": "8f4b6144-6da8-4d60-b0aa-5a70a5ec3915",
    "goodsId": "",
    "userId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
    "content": "111111是短发当时的分隔符",
    "createTime": 1487935630866
  },
  "other": null
}
{
  "status": 400,
  "msg": "不能对商品重复添加评论",
  "data": "",
  "other": null
}
					</pre>
				</td>
			</tr>
			<tr class="evaluation" id="evaluation-select-all">
				<td>查询某个商品的全部评论</td>
				<td>
					evaluation/selectAll.do
				</td>
				<td>post</td>
				<td>
					<p>goodsId 商品的id</p>
					<pre>
{
	"goodsId":"3"
}
					</pre>
				</td>
				<td>不需要登陆</td>
				<td>
					<pre>
{
  "status": 200,
  "msg": "查询商品评论成功",
  "data": [
    {
      "id": "6d91f93f-2102-4833-846a-0226a5cbbb6f",
      "goodsId": "3",
      "userId": "0cc95799-4660-4758-9f7e-0053187eac7a",
      "content": "sdftt内容65676yut",
      "createTime": 1487933948000
    },
    {
      "id": "77fb089a-23c1-4f7d-ad3d-f8de1f9a6d63",
      "goodsId": "3",
      "userId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
      "content": "sdf3435内容443",
      "createTime": 1487933886000
    }
  ],
  "other": null
}

					</pre>
				</td>
			</tr>

			
			<tr class="order" id="order-select-all-by-seller-id">
				<td>查询卖家的所有订单</td>
				<td>
					/order/selectAllBySellerId.do
				</td>
				<td>get</td>
				<td>
				</td>
				<td>需要卖家登陆</td>
				<td>
					<pre>
						...
					</pre>
				</td>
			</tr>
			
			<tr class="order" id="order-select-all-by-user-id">
				<td></td>
				<td>
					order/selectAllByUserId.do
				</td>
				<td>get</td>
				<td>
					
				</td>
				<td>需要登录</td>
				<td>
					<pre>
{
  "status": 200,
  "msg": "查询买家订单成功",
  "data": [
    {
      "id": "92b5b1e2-c3b0-4ac8-bf1c-7204e3b67b0c",
      "userId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
      "sellerId": "17718c86-e8ca-4a9d-96f3-f1a4a3da04ab",
      "status": 1000,
      "orderItems": [
        {
          "id": "34f6ec8d-a855-40d3-b271-3a720b6f23dd",
          "orderId": "92b5b1e2-c3b0-4ac8-bf1c-7204e3b67b0c",
          "goodsId": "1",
          "goodsCount": 2
        },
        {
          "id": "68f72aea-9893-4fa1-aab5-9851b8a7ea3f",
          "orderId": "92b5b1e2-c3b0-4ac8-bf1c-7204e3b67b0c",
          "goodsId": "2",
          "goodsCount": 3
        }
      ]
    }
  ],
  "other": null
}

					</pre>
				</td>
			</tr>

			<tr class="order" id="order-add">
				<td>提交一个订单</td>
				<td>
					order/add.do
				</td>
				<td>post</td>
				<td>
					<p>goodsIdAndCount 存放商品id及其数量的map</p>
					<p>map的键为商品id，值为数量</p>
					<pre>
{
	"goodsIdAndCount":{
		"fb653ed2-f8e3-4346-9bdb-bc9f9279d0f1":1,
		"ad259009-d18a-42e6-898b-8f79d14da0bd":1
	}
}
					</pre>
				</td>
				<td>可能会发生数量不够的情况</td>
				<td>
					<pre>
有某商品的数量不够
{
  "status": 400,
  "msg": "商品的数量不够",
  "data": "",
  "other": null
}
成功
{
  "status": 200,
  "msg": "生成订单成功",
  "data": "",
  "other": null
}
					</pre>
				</td>
			</tr>
----------------------------------------------------------------------------------------------------------------



			<tr class="bookcrud" id="bookcrud">
				<td>增加书</td>
				<td>/admin!addBook.action
					<form action="admin!addBook.action" method="post">
						isbn:<input type="text" name="book.isbn"><br> label:
						<input type="text" name="book.label"><br> holdplace:
						<input type="text" name="book.holdplace"><br>
						<input type="submit" value="增加">
					</form>
				</td>
				<td>post</td>
				<td>
					<p>书isbn book.isbn</p>
					<p>书标签 book.label</p>
					<p>书存放地 book.holdplace</p>
				</td>
				<td></td>
				<td>
					<pre>
{
	"data": {
		"author": "",
		"bookname": "Hibernate开发与实战",
		"count": 0,
		"createtime": {
			"date": 29,
			"day": 0,
			"hours": 20,
			"minutes": 49,
			"month": 10,
			"seconds": 30,
			"time": 1448801370269,
			"timezoneOffset": -480,
			"year": 115
		},
		"description": "《Hibernate开发与实战》采用...",
		"holdplace": "",
		"id": 2,
		"imgpic": "http://...",
		"isbn": "9787121092848",
		"label": "",
		"nowcount": 0,
		"publisher": ""
	},
	"msg": "新书添加成功",
	"status": 200,
	"other": {}
}
						</pre>
				</td>
			</tr>
			<tr class="bookcrud" id="sddasfa">
				<td>更新书</td>
				<td>/admin!updateBook.action
					<form action="admin!updateBook.action" method="post">

						id:<input type="text" name="book.id"><br> label:
						<input type="text" name="book.label"><br> holdplace:
						<input type="text" name="book.holdplace"><br> author:
						<input type="text" name="book.author"><br> publisher:
						<input type="text" name="book.publisher"><br> description:
						<input type="text" name="book.description"><br> imgpic:
						<input type="text" name="book.imgpic"><br>
						<input type="submit" value="更新">
					</form>
				</td>
				<td>post</td>
				<td>
					<p>书id book.id</p>
					<p>书标签 book.label</p>
					<p>书存放地 book.holdplace</p>
					<p>书作者 book.author</p>
					<p>书出版社 book.publisher</p>
					<p>书介绍 book.description</p>
					<p>书图片地址 book.imgpic</p>
				</td>
				<td></td>
				<td>
					<pre>

					</pre>
				</td>
			</tr>
			<tr class="bookcrud" id="sdfa">
				<td>查询所有书</td>
				<td><a href="admin!loadAllBook.action">/admin!loadAllBook.action</a></td>
				<td>get</td>
				<td></td>
				<td></td>
				<td>
					<pre>
						</pre>
				</td>
			</tr>

			<tr class="mainpage" id="mainpage">
				<td>获取推荐书</td>
				<td><a href="mainpage!recommendBooks.action">/mainpage!recommendBooks.action</a></td>
				<td>get</td>
				<td></td>
				<td></td>
				<td>
					<pre>
{
	"data": [
		{
			"author": "杭州华三通信技术有限公司",
			"bookname": "路由交换技术 第3卷",
			"count": 1,
			"createtime": {
				"date": 30,
				"day": 1,
				"hours": 9,
				"minutes": 42,
				"month": 10,
				"nanos": 0,
				"seconds": 8,
				"time": 1448847728000,
				"timezoneOffset": -480,
				"year": 115
			},
			"description": ".....",
			"holdplace": "二楼右面",
			"id": 14,
			"imgpic": "http://...",
			"isbn": "9787302276296",
			"label": "技术-通信",
			"nowcount": 1,
			"publisher": ""
		}
	],
	"msg": "推荐书成功",
	"status": 200,
	"other": {}
}
						</pre>
				</td>
			</tr>

		</tbody>
	</table>

</body>

</html>